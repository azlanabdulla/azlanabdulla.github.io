<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>TYPE ASAP</title>
  <style>
    body {
      margin: 0;
      font-family: 'Courier New', Courier, monospace;
      background-color: #121826;
      color: #fff;
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
    }
    .container {
      max-width: 800px;
      padding: 20px;
      background-color: #1e293b;
      border-radius: 8px;
      box-shadow: 0 0 10px rgba(0, 0, 0, 0.3);
    }
    h1 {
      text-align: center;
      color: #22d3ee;
    }
    #stats {
      display: flex;
      justify-content: space-between;
      margin-bottom: 10px;
      font-weight: bold;
    }
    #testText {
      background-color: #334155;
      padding: 15px;
      border-radius: 6px;
      min-height: 100px;
      font-size: 1.2em;
      white-space: pre-wrap;
    }
    .correct {
      color: lightgreen;
    }
    .incorrect {
      color: red;
    }
    #inputArea {
      margin-top: 10px;
      width: 100%;
      font-size: 1.2em;
      padding: 10px;
      border-radius: 5px;
      border: none;
    }
    #inputArea:focus {
      outline: none;
    }
    .accuracy-stats {
      margin-top: 20px;
      font-size: 1em;
      display: flex;
      flex-wrap: wrap;
      gap: 15px;
    }
    .accuracy-stats div {
      color: #60a5fa;
    }
    .highlight {
      border-bottom: 2px dashed #facc15;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>TYPE ASAP</h1>
    <div id="stats">
      <div>Time Left: <span id="timer">60s</span></div>
      <div>WPM: <span id="wpm">0</span></div>
      <div>Accuracy: <span id="accuracy">0%</span></div>
    </div>
    <div id="testText"></div>
    <textarea id="inputArea" placeholder="Start typing here..." autofocus></textarea>
    <div class="accuracy-stats" id="accuracyDetails"></div>
  </div>

  <script>
    const testText = `Keep calm and keep typing. Fast fingers make better typists! Type smart, type sharp, type fast. Keep calm and keep typing. The quick brown fox jumps over the lazy dog. Keep calm and keep typing. Improve your speed and accuracy with practice. Improve your speed and accuracy with practice. Type smart, type sharp, type fast. Keep calm and keep typing. The quick brown fox jumps over the lazy dog.`;

    const testDisplay = document.getElementById('testText');
    const inputArea = document.getElementById('inputArea');
    const timerElement = document.getElementById('timer');
    const wpmElement = document.getElementById('wpm');
    const accuracyElement = document.getElementById('accuracy');
    const accuracyDetails = document.getElementById('accuracyDetails');

    let timeLeft = 60;
    let timer;
    let started = false;
    let correctCount = 0;
    let totalTyped = 0;
    let letterStats = {};

    function updateTestDisplay() {
      const typed = inputArea.value;
      let displayHTML = '';
      for (let i = 0; i < testText.length; i++) {
        const expectedChar = testText[i];
        const typedChar = typed[i];
        if (typedChar == null) {
          displayHTML += `<span>${expectedChar}</span>`;
        } else if (typedChar === expectedChar) {
          displayHTML += `<span class="correct">${expectedChar}</span>`;
        } else {
          displayHTML += `<span class="incorrect">${expectedChar}</span>`;
        }
      }
      testDisplay.innerHTML = displayHTML;
    }

    function updateStats() {
      const typed = inputArea.value;
      correctCount = 0;
      totalTyped = typed.length;
      letterStats = {};
      for (let i = 0; i < typed.length; i++) {
        const expected = testText[i];
        const typedChar = typed[i];
        if (!letterStats[expected]) letterStats[expected] = { correct: 0, total: 0 };
        letterStats[expected].total++;
        if (typedChar === expected) {
          correctCount++;
          letterStats[expected].correct++;
        }
      }

      const wordsTyped = typed.trim().split(/\s+/).length;
      const wpm = Math.round((wordsTyped / (60 - timeLeft)) * 60) || 0;
      const accuracy = totalTyped > 0 ? Math.round((correctCount / totalTyped) * 100) : 0;
      wpmElement.textContent = wpm;
      accuracyElement.textContent = accuracy + '%';

      let detailsHTML = '';
      for (const key in letterStats) {
        const stat = letterStats[key];
        const acc = Math.round((stat.correct / stat.total) * 100);
        detailsHTML += `<div>${key}: ${acc}%</div>`;
      }
      accuracyDetails.innerHTML = detailsHTML;
    }

    function endTest() {
      clearInterval(timer);
      inputArea.disabled = true;
    }

    inputArea.addEventListener('input', () => {
      if (!started) {
        started = true;
        timer = setInterval(() => {
          timeLeft--;
          timerElement.textContent = timeLeft + 's';
          if (timeLeft <= 0) {
            endTest();
          }
        }, 1000);
      }
      updateTestDisplay();
      updateStats();
    });

    // Initialize test text
    updateTestDisplay();
  </script>
</body>
</html>
